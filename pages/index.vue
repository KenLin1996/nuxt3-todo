<!-- pages/index.vue -->
<template>
  <div>
    <!-- å°ˆæ¡ˆä»‹ç´¹ Section -->
    <section
      class="w-full min-h-screen flex flex-col items-center justify-center bg-[#F8FAFC] py-20 px-4 md:px-12"
    >
      <h1
        class="text-4xl md:text-5xl font-bold mb-10 text-center text-[#0B3C49]"
      >
        ğŸ“ Nuxt3 Todo List å°ˆæ¡ˆä»‹ç´¹
      </h1>

      <p
        class="mb-10 text-lg md:text-xl leading-relaxed text-center text-[#334155] max-w-3xl"
      >
        æœ¬å°ˆæ¡ˆç”± <strong>Nuxt 3</strong>ï¼ˆå‰ç«¯ï¼‰èˆ‡
        <strong>FastAPI</strong>ï¼ˆå¾Œç«¯ï¼‰é–‹ç™¼ï¼Œ
        æ˜¯ä¸€å€‹åŠŸèƒ½å®Œæ•´ã€äº’å‹•æµæš¢çš„ä»»å‹™ç®¡ç†å·¥å…·ã€‚
      </p>

      <ul class="grid gap-5 md:grid-cols-2 max-w-4xl w-full">
        <li class="bg-white rounded-xl shadow-md p-5 text-lg text-[#1E293B]">
          âœ… æ–°å¢ã€åˆªé™¤ã€ç·¨è¼¯ Todo é …ç›®
        </li>
        <li class="bg-white rounded-xl shadow-md p-5 text-lg text-[#1E293B]">
          ğŸ”„ é»æ“Šåˆ‡æ›å®Œæˆç‹€æ…‹ï¼Œé›™æ“Šç·¨è¼¯å…§å®¹
        </li>
        <li class="bg-white rounded-xl shadow-md p-5 text-lg text-[#1E293B]">
          ğŸ¯ ç‹€æ…‹ç¯©é¸ï¼ˆå…¨éƒ¨ / æœªå®Œæˆ / å·²å®Œæˆï¼‰
        </li>
        <li class="bg-white rounded-xl shadow-md p-5 text-lg text-[#1E293B]">
          ğŸ“¦ ä½¿ç”¨ Pinia ç®¡ç† todos ç‹€æ…‹èˆ‡ç¯©é¸æ¢ä»¶
        </li>
        <li
          class="bg-white rounded-xl shadow-md p-5 text-lg text-[#1E293B] md:col-span-2"
        >
          ğŸ§© æ‹–æ›³æ’åºï¼šæ•´åˆ vuedraggable å¯¦ç¾æ‹–æ”¾ï¼Œä¸¦åŒæ­¥æ›´æ–°å¾Œç«¯æ’åº
        </li>
      </ul>
    </section>

    <!-- å°ˆæ¡ˆç•«é¢é è¦½ Section -->
    <section
      class="w-full min-h-screen flex items-center justify-center flex-col bg-[#EFF6FF] py-10 px-4 md:px-12"
    >
      <h2
        class="text-4xl md:text-5xl font-bold text-center mb-8 text-[#0B3C49]"
      >
        âœ¨ å°ˆæ¡ˆç•«é¢é è¦½
      </h2>
      <div class="w-auto bg-white rounded-2xl p-5 shadow-xl h-[500px]">
        <img
          v-if="previewFeatures[current].type !== 'video'"
          :src="previewFeatures[current].src"
          :alt="previewFeatures[current].alt"
          loading="lazy"
          class="rounded-2xl w-full h-full max-h-[500px] object-contain"
        />
        <video
          v-else
          :src="previewFeatures[current].src"
          :alt="previewFeatures[current].alt"
          class="rounded-2xl w-full h-full"
          autoplay
          loop
          muted
        ></video>
      </div>
      <ul
        class="flex w-full justify-center space-x-4 md:space-x-8 items-center mt-8 h-full"
      >
        <li
          v-for="(items, index) in previewFeatures"
          :key="index"
          class="px-4 py-2 rounded-lg bg-[#E0F2FE] text-[#0369A1] cursor-pointer font-medium transition hover:bg-[#BAE6FD] hover:text-[#075985]"
          :class="{
            'bg-[#0369A1] text-[#0369A1] font-semibold shadow-md drop-shadow-sm':
              current === index,
          }"
          @click="current = index"
        >
          {{ items.label }}
        </li>
      </ul>
    </section>

    <!-- æŠ€è¡“å †ç–Š Section -->
    <section
      class="w-full min-h-screen flex flex-col items-center justify-center bg-[#F8FAFC] py-10 px-4 md:px-12"
    >
      <h2
        class="text-4xl md:text-5xl font-bold text-center mb-8 text-[#0B3C49]"
      >
        ğŸ› ï¸ æŠ€è¡“å †ç–Š
      </h2>

      <div class="w-full max-w-5xl bg-white rounded-2xl p-6 shadow-xl">
        <ul
          class="grid grid-cols-1 md:grid-cols-2 gap-6 text-lg md:text-xl text-[#334155]"
        >
          <li><strong>å‰ç«¯æ¡†æ¶ï¼š</strong> Nuxt 3 (Vue 3 Composition API)</li>
          <li><strong>å¾Œç«¯ APIï¼š</strong> FastAPI</li>
          <li><strong>ç‹€æ…‹ç®¡ç†ï¼š</strong> Pinia</li>
          <li><strong>UI æ¡†æ¶ï¼š</strong> Tailwind CSS</li>
          <li><strong>æ¸¬è©¦å·¥å…·ï¼š</strong> Vitest + Vue Test Utils</li>
          <li><strong>é©—è­‰å·¥å…·ï¼š</strong> VeeValidate / Yup</li>
          <li><strong>æ‹–æ›³å¯¦ä½œï¼š</strong> Vuedraggable</li>
          <li><strong>å„²å­˜æ–¹å¼ï¼š</strong> localStorage / MongoDB</li>
        </ul>
      </div>
    </section>

    <!-- CTA Section -->
    <section
      class="w-full min-h-screen flex flex-col items-center justify-center bg-[#DBEAFE] py-10 px-4 md:px-12"
    >
      <h2
        class="text-4xl md:text-5xl font-bold text-center mb-8 text-[#0B3C49]"
      >
        ğŸš€ ç«‹å³å»ºç«‹ä½ çš„ä»»å‹™æ¸…å–®
      </h2>
      <template v-if="!isLoggedIn">
        <div
          class="bg-white rounded-3xl shadow-2xl p-10 w-full max-w-md text-center space-y-6"
        >
          <p class="text-xl text-[#334155] font-medium">
            ç«‹å³ç™»å…¥ä»¥é–‹å§‹ç®¡ç†ä»»å‹™
          </p>
          <NuxtLink
            to="/login"
            class="inline-flex items-center justify-center w-full bg-[#00DC82] text-white px-6 py-3 text-lg rounded-xl hover:bg-[#00B16A] transition font-semibold shadow"
          >
            ğŸ” ç™»å…¥ï¼ˆå°šæœªå®Œæˆï¼‰
          </NuxtLink>

          <div class="text-[#475569] text-base">
            é‚„æ²’æœ‰å¸³æˆ¶å—ï¼Ÿ
            <NuxtLink
              to="/register"
              class="text-[#00B16A] font-semibold hover:underline"
            >
              å…è²»è¨»å†Š
            </NuxtLink>
          </div>
        </div>
      </template>
      <template v-else>
        <div
          class="bg-white rounded-3xl shadow-2xl p-10 w-full max-w-md text-center space-y-6"
        >
          <p class="text-xl text-[#334155] font-medium">
            ç«‹å³é–‹å§‹ç®¡ç†ä½ çš„ä»»å‹™æ¸…å–®
          </p>
          <NuxtLink
            to="/todos"
            class="inline-flex items-center justify-center w-full bg-[#00DC82] text-white px-6 py-3 text-lg rounded-xl hover:bg-[#00B16A] transition font-semibold shadow"
          >
            ğŸš€ é–‹å§‹ä½¿ç”¨
          </NuxtLink>
        </div>
      </template>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";
// import { useTodoApi } from "../composables/useTodoApi";
import memeCatGif from "../assets/medias/memeCat.gif";
import vegOutCatGif from "../assets/medias/vegOutCat.gif";

useHead({
  title: "NTL å°ˆæ¡ˆé¦–é ",
  meta: [
    {
      name: "description",
      content:
        "é€™æ˜¯ä¸€å€‹ä½¿ç”¨ Nuxt 3 èˆ‡ FastAPI æ‰“é€ çš„ Todo List æ‡‰ç”¨ï¼Œå…·å‚™æ‹–æ›³æ’åºã€PWAã€é›¢ç·šå„²å­˜ç­‰åŠŸèƒ½ã€‚",
    },
    {
      name: "keywords",
      content: "Nuxt, FastAPI, Todo, æ‹–æ›³æ’åº, PWA, Vue3, å‰ç«¯å°ˆæ¡ˆ",
    },
    { property: "og:title", content: "Todo List å°ˆæ¡ˆä»‹ç´¹ï½œNuxt + FastAPI" },
    {
      property: "og:description",
      content: "é«”é©—ä¸€å€‹å…·å‚™å®Œæ•´åŠŸèƒ½èˆ‡è‰¯å¥½ä½¿ç”¨è€…é«”é©—çš„ Todo List å°ˆæ¡ˆã€‚",
    },
    { property: "og:type", content: "website" },
  ],
  link: [
    {
      rel: "canonical",
      href: "https://nuxt3-todo.vercel.app/",
    },
  ],
});

// âœ… çµæ§‹åŒ–è³‡æ–™ (Rich Snippets)
definePageMeta({
  script: [
    {
      type: "application/ld+json",
      innerHTML: JSON.stringify({
        "@context": "https://schema.org",
        "@type": "WebApplication", // ä»£è¡¨é€™æ˜¯ä¸€å€‹ç¶²é 
        name: "NTL Todo App",
        url: "https://nuxt3-todo.vercel.app",
        applicationCategory: "Productivity",
        operatingSystem: "All",
        description:
          "ä¸€å€‹ä½¿ç”¨ Nuxt3 å’Œ FastAPI æ‰“é€ çš„å¾…è¾¦æ¸…å–®æ‡‰ç”¨ï¼Œæ”¯æ´æ‹–æ›³æ’åºèˆ‡é›¢ç·šç€è¦½ã€‚",
        offers: {
          "@type": "Offer",
          price: "0", // å…è²»ä½¿ç”¨
          priceCurrency: "USD",
        },
        author: {
          "@type": "Person",
          name: "Ken",
        },
      }),
    },
  ],
  __dangerouslyDisableSanitizers: ["script"],
});

const current = ref<number>(0);
const { isLoggedIn } = useUserStore();
const previewFeatures = [
  {
    label: "åŸºæœ¬æ“ä½œ",
    // src: "/media/responsive.mp4",
    src: memeCatGif,

    alt: "åŸºæœ¬æ“ä½œå½±ç‰‡",
  },
  {
    label: "æ‹–æ›³ä»»å‹™æ’åº",
    src: vegOutCatGif,
    alt: "æ‹–æ›³æ’åºå‹•ç•«",
  },
  {
    label: "éŸ¿æ‡‰å¼è¨­è¨ˆ",
    src: "/media/responsive.mp4",
    alt: "éŸ¿æ‡‰å¼è¨­è¨ˆå½±ç‰‡",
    type: "video",
  },
  {
    label: "æ”¯æ´é›¢ç·šç€è¦½",
    src: vegOutCatGif,
    alt: "é›¢ç·šæ”¯æ´é è¦½",
  },
];

// onMounted(() => {
//   const { getTodos } = useTodoApi();
//   getTodos().catch(() => {});
// });
</script>
